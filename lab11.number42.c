#include <stdio.h>

// Функция для обмена местами четвертей матрицы
void swapQuarters(int mat[][100], int rows, int cols) {
    int halfRows = rows / 2; // Половина количества строк
    int halfCols = cols / 2; // Половина количества столбцов

    // Меняем местами левую нижнюю и правую верхнюю четверти
    for (int i = 0; i < halfRows; i++) {
        for (int j = 0; j < halfCols; j++) {
            // Сохраняем элемент из правой верхней четверти
            int temp = mat[i][j + halfCols];
            // Перемещаем элемент из левой нижней четверти в правую верхнюю
            mat[i][j + halfCols] = mat[i + halfRows][j];
            // Перемещаем сохраненный элемент в левую нижнюю четверть
            mat[i + halfRows][j] = temp;
        }
    }
}

// Функция для вывода матрицы
void printMatrix(int mat[][100], int rows, int cols) {
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            printf("%d ", mat[i][j]); // Вывод каждого элемента матрицы
        }
        printf("\n"); // Переход на новую строку после вывода строки матрицы
    }
}

int main() {
    int m, n;

    // Ввод размеров матрицы
    printf("Введите количество строк (M): ");
    scanf("%d", &m);
    printf("Введите количество столбцов (N): ");
    scanf("%d", &n);

    // Проверка на четность размеров
    if (m % 2 != 0 || n % 2 != 0) {
        printf("Ошибка: M и N должны быть четными числами.\n");
        return 1; // Завершение программы с ошибкой
    }

    int matrix[100][100]; // Объявление матрицы фиксированного размера

    // Ввод элементов матрицы
    printf("Введите элементы матрицы:\n");
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            scanf("%d", &matrix[i][j]); // Ввод каждого элемента матрицы
        }
    }

    printf("Исходная матрица:\n");
    printMatrix(matrix, m, n); // Вывод исходной матрицы

    swapQuarters(matrix, m, n); // Замена четвертей

    printf("Матрица после замены четвертей:\n");
    printMatrix(matrix, m, n); // Вывод измененной матрицы

    return 0; // Завершение программы с кодом 0 (успешное выполнение)
}
